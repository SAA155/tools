<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>密码生成器</title>
    <link rel="icon" href="https://vip.123pan.cn/1813813253/cdn/logo/1.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        .glass {
            backdrop-filter: blur(32px);
            -webkit-backdrop-filter: blur(32px);
        }
        /* Custom slider styles */
        input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; background: transparent; }
        input[type="range"]::-webkit-slider-runnable-track { 
            height: 8px; 
            background: rgba(0, 0, 0, 0.1); 
            border-radius: 4px; 
        }
        .dark input[type="range"]::-webkit-slider-runnable-track { background: rgba(0, 0, 0, 0.3); }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; margin-top: -6px;
            width: 20px; height: 20px; background: #ffffff;
            border-radius: 50%; cursor: pointer; border: 2px solid rgba(0, 0, 0, 0.1);
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .dark input[type="range"]::-webkit-slider-thumb { border-color: rgba(255, 255, 255, 0.5); }
        input[type="range"]:active::-webkit-slider-thumb { transform: scale(1.2); }
        
        /* Bouncy Animations */
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.95); }
            80% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 1; transform: scale(1); }
        }
        .pop-in { animation: popIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

        .settings-panel { transition: opacity 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), visibility 0.3s; }
        .settings-panel.hidden { opacity: 0; transform: translateY(-10px) scale(0.98); visibility: hidden; position: absolute; }

        .mode-btn { transition: background-color 0.2s ease-in-out, color 0.2s; }
        
        /* Light Mode Active Button */
        .mode-btn.active { background-color: #6366f1; color: white; } /* Indigo-500 */
        /* Dark Mode Active Button */
        .dark .mode-btn.active { background-color: rgba(255, 255, 255, 0.2); color: white; }
        
        .spinning { animation: spin 0.5s ease-out; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* Bouncy Toggle Switch */
        .peer:checked ~ .bouncy-ball { transform: translateX(100%) scale(1); }
        .peer:active ~ .bouncy-ball { transform: translateX(50%) scale(1.2); }
        .bouncy-ball { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.1); border-radius: 20px; }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.3); }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 bg-slate-50 dark:bg-slate-900 transition-colors duration-300">

    <!-- Main Container -->
    <div class="w-full max-w-md rounded-3xl p-6 glass bg-white/80 dark:bg-black/40 border border-slate-200 dark:border-white/10 text-slate-800 dark:text-white shadow-2xl shadow-slate-200/50 dark:shadow-black/50 space-y-6">

        <h1 class="text-3xl font-bold tracking-wider text-center text-slate-900 dark:text-white">密码生成器</h1>

        <!-- Mode Switcher -->
        <div class="grid grid-cols-3 gap-1 p-1 bg-slate-200 dark:bg-black/20 rounded-lg">
            <button data-mode="random" class="mode-btn active rounded-md py-2 font-semibold text-sm text-slate-600 dark:text-slate-300">随机</button>
            <button data-mode="memorable" class="mode-btn rounded-md py-2 font-semibold text-sm text-slate-600 dark:text-slate-300">容易记住</button>
            <button data-mode="pin" class="mode-btn rounded-md py-2 font-semibold text-sm text-slate-600 dark:text-slate-300">PIN</button>
        </div>

        <!-- Password Display -->
        <div class="relative p-4 bg-slate-100 dark:bg-black/20 border border-slate-200 dark:border-transparent rounded-xl flex items-center gap-2">
            <span id="password-display" class="text-2xl font-mono tracking-wider truncate flex-grow text-left text-indigo-600 dark:text-white font-bold">P@$$w0rd!</span>
            <button id="refresh-btn" class="p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-white/20 active:scale-90 transition-all duration-150 text-slate-500 dark:text-white">
                <svg class="w-6 h-6" id="refresh-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M20 4h-5v5M4 20h5v-5"></path></svg>
            </button>
            <button id="copy-btn" class="p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-white/20 active:scale-90 transition-all duration-150 text-slate-500 dark:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
            </button>
        </div>
        
        <!-- Strength Bar -->
        <div id="strength-indicator" class="h-2 w-full bg-slate-200 dark:bg-black/20 rounded-full overflow-hidden">
            <div id="strength-bar" class="h-full rounded-full transition-all duration-300"></div>
        </div>

        <div class="relative min-h-[220px]">
            <!-- Random Mode Settings -->
            <div id="random-settings" class="settings-panel space-y-4 pt-4 w-full">
                <div class="flex justify-between items-center"><label class="font-semibold text-slate-600 dark:text-white">密码长度:</label><span id="random-length-value" class="text-xl font-bold text-slate-800 dark:text-white">16</span></div>
                <input type="range" id="random-length-slider" min="4" max="32" value="16" class="w-full">
                <div class="grid grid-cols-2 gap-4 text-slate-700 dark:text-white">
                    <!-- Toggles using bg-slate-300 for light mode track -->
                    <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">大写字母</span><div class="relative"><input type="checkbox" id="uppercase-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
                    <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">小写字母</span><div class="relative"><input type="checkbox" id="lowercase-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
                    <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">数字</span><div class="relative"><input type="checkbox" id="numbers-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
                    <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">符号</span><div class="relative"><input type="checkbox" id="symbols-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
                </div>
            </div>

            <!-- Memorable Mode Settings -->
            <div id="memorable-settings" class="settings-panel hidden space-y-4 pt-4 w-full text-slate-700 dark:text-white">
                <div class="flex justify-between items-center"><label class="font-semibold">单词数量:</label><span id="word-count-value" class="text-xl font-bold">4</span></div>
                <input type="range" id="word-count-slider" min="3" max="6" value="4" class="w-full">
                <div class="flex justify-between items-center">
                    <label class="font-semibold">分隔符:</label>
                    <div class="relative">
                         <select id="separator-select" class="hidden"><option value="-">-</option><option value="_">_</option><option value=" ">Space</option><option value="">None</option></select>
                         <button id="custom-separator-button" class="w-24 p-2 text-sm text-center font-semibold bg-slate-100 dark:bg-black/20 border border-slate-300 dark:border-white/20 rounded-md flex justify-between items-center hover:bg-slate-200 dark:hover:bg-white/10">
                            <span id="custom-separator-label">-</span>
                            <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                         </button>
                         <div id="custom-separator-options" class="hidden absolute w-full mt-1 rounded-lg glass bg-white/90 dark:bg-black/50 border border-slate-200 dark:border-white/20 z-10 custom-scrollbar shadow-lg"></div>
                    </div>
                </div>
                <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">首字母大写</span><div class="relative"><input type="checkbox" id="capitalize-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
                <label class="flex items-center justify-between cursor-pointer"><span class="font-semibold">添加数字</span><div class="relative"><input type="checkbox" id="add-number-check" class="sr-only peer" checked><div class="w-11 h-6 bg-slate-300 dark:bg-white/20 rounded-full peer transition-colors peer-checked:bg-indigo-500 dark:peer-checked:bg-sky-500"></div><div class="absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full bouncy-ball shadow-sm"></div></div></label>
            </div>
            
            <!-- PIN Mode Settings -->
            <div id="pin-settings" class="settings-panel hidden space-y-4 pt-4 w-full text-slate-700 dark:text-white">
                <div class="flex justify-between items-center"><label class="font-semibold">PIN 长度:</label><span id="pin-length-value" class="text-xl font-bold">6</span></div>
                <input type="range" id="pin-length-slider" min="4" max="12" value="6" class="w-full">
            </div>
        </div>
    </div>

    <script>
        // --- Dark Mode ---
        const applyTheme = () => { if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.remove('dark'); } };
        applyTheme();
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);

        // --- State & DOM Elements ---
        let currentMode = 'random';
        const passwordDisplay = document.getElementById('password-display');
        const copyBtn = document.getElementById('copy-btn');
        const refreshBtn = document.getElementById('refresh-btn');
        const refreshIcon = document.getElementById('refresh-icon');
        const strengthBar = document.getElementById('strength-bar');
        const modeButtons = document.querySelectorAll('.mode-btn');
        const settingsPanels = document.querySelectorAll('.settings-panel');
        // Random
        const randomLengthSlider = document.getElementById('random-length-slider');
        const randomLengthValue = document.getElementById('random-length-value');
        const randomCheckboxes = document.querySelectorAll('#random-settings input[type="checkbox"]');
        // Memorable
        const wordCountSlider = document.getElementById('word-count-slider');
        const wordCountValue = document.getElementById('word-count-value');
        const separatorSelect = document.getElementById('separator-select');
        const customSeparatorButton = document.getElementById('custom-separator-button');
        const customSeparatorLabel = document.getElementById('custom-separator-label');
        const customSeparatorOptions = document.getElementById('custom-separator-options');
        const memorableCheckboxes = document.querySelectorAll('#memorable-settings input[type="checkbox"]');
        // PIN
        const pinLengthSlider = document.getElementById('pin-length-slider');
        const pinLengthValue = document.getElementById('pin-length-value');
        
        // --- Character/Word Sets ---
        const charSets = { uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', lowercase: 'abcdefghijklmnopqrstuvwxyz', numbers: '0123456789', symbols: '!@#$%^&*()_+~`|}{[]:;?><,./-=' };
        const wordList = ['Acid', 'Amber', 'Anchor', 'Angel', 'Aqua', 'Arrow', 'Audit', 'Bacon', 'Badge', 'Ballet', 'Bamboo', 'Banana', 'Beacon', 'Beast', 'Bingo', 'Blade', 'Bloom', 'Blush', 'Bonus', 'Brick', 'Bridge', 'Bright', 'Bubble', 'Cabin', 'Cable', 'Cactus', 'Camel', 'Candy', 'Canvas', 'Carbon', 'Cargo', 'Castle', 'Cave', 'Cedar', 'Charm', 'Cherry', 'Chess', 'Chili', 'Choir', 'Claw', 'Clay', 'Cobra', 'Cocoa', 'Coffee', 'Comet', 'Cosmic', 'Cozy', 'Credit', 'Crisp', 'Crown', 'Crystal', 'Cubic', 'Cycle', 'Delta', 'Denim', 'Diesel', 'Diver', 'Dolphin', 'Donut', 'Dragon', 'Dream', 'Drill', 'Drone', 'Dusty', 'Echo', 'Elbow', 'Ember', 'Epic', 'Fable', 'Fairy', 'Falcon', 'Fever', 'Fjord', 'Flame', 'Flash', 'Flora', 'Flute', 'Fossil', 'Fringe', 'Frost', 'Galaxy', 'Gecko', 'Ginger', 'Glacier', 'Glow', 'Gnome', 'Goat', 'Gong', 'Gospel', 'Grape', 'Grill', 'Grove', 'Halo', 'Happy', 'Harbor', 'Hazel', 'Heart', 'Helix', 'Hero', 'Honey', 'Horizon', 'Hotel', 'Humble', 'Ibex', 'Icon', 'Indigo', 'Inferno', 'Ivory', 'Jade', 'Jazz', 'Jello', 'Joker', 'Juice', 'Jumbo', 'Karma', 'Kayak', 'Kiosk', 'Kiwi', 'Lava', 'Legacy', 'Lemon', 'Liberty', 'Linen', 'Logic', 'Lotus', 'Loyal', 'Lunar', 'Magic', 'Mango', 'Maple', 'Marble', 'Matrix', 'Melon', 'Mint', 'Misty', 'Mocha', 'Mural', 'Music', 'Mystic', 'Nectar', 'Ninja', 'Noble', 'North', 'Novel', 'Nylon', 'Oasis', 'Olive', 'Omega', 'Onyx', 'Orbit', 'Orchid', 'Panda', 'Paper', 'Papaya', 'Parade', 'Pasta', 'Path', 'Peach', 'Pebble', 'Pencil', 'Pepper', 'Phoenix', 'Piano', 'Pilot', 'Pine', 'Pixel', 'Pizza', 'Plaza', 'Plum', 'Polar', 'Pony', 'Poppy', 'Prism', 'Pulse', 'Puma', 'Puzzle', 'Quartz', 'Quest', 'Quilt', 'Radio', 'Rainbow', 'Ranger', 'Raven', 'Rebel', 'Rhythm', 'Rider', 'Ripple', 'Robot', 'Rocky', 'Rodeo', 'Royal', 'Ruby', 'Safari', 'Salad', 'Salmon', 'Salsa', 'Satin', 'Scout', 'Sculpt', 'Shadow', 'Shark', 'Shine', 'Signal', 'Silver', 'Siren', 'Sketch', 'Sleek', 'Slogan', 'Solar', 'Sonic', 'Soprano', 'Spark', 'Spirit', 'Sponge', 'Spicy', 'Stark', 'Steel', 'Stone', 'Stork', 'Story', 'Strobe', 'Stroll', 'Studio', 'Style', 'Sugar', 'Sunny', 'Super', 'Surf', 'Sushi', 'Swan', 'Sweet', 'Swift', 'Symbol', 'Taco', 'Tango', 'Tapestry', 'Tavern', 'Tempo', 'Tender', 'Tennis', 'Tequila', 'Terra', 'Thunder', 'Tidal', 'Tiger', 'Timber', 'Titan', 'Toast', 'Tonic', 'Torch', 'Tornado', 'Toucan', 'Tower', 'Trance', 'Trend', 'Tribute', 'Trident', 'Trinity', 'Triumph', 'Trophy', 'Tropical', 'Truffle', 'Trumpet', 'Tulip', 'Tundra', 'Tunnel', 'Turtle', 'Tutor', 'Twilight', 'Twist', 'Tycoon', 'Unicorn', 'Union', 'Unique', 'Unity', 'Utopia', 'Vacuum', 'Valley', 'Vanilla', 'Vector', 'Velvet', 'Venture', 'Venus', 'Verdict', 'Verse', 'Vibrant', 'Victor', 'Video', 'Viking', 'Village', 'Vinegar', 'Vintage', 'Violet', 'Viper', 'Virtue', 'Vision', 'Vista', 'Vital', 'Vivid', 'Vocal', 'Vogue', 'Void', 'Volt', 'Vortex', 'Voyage', 'Wafer', 'Wagon', 'Wallet', 'Walnut', 'Waltz', 'Warrior', 'Wasp', 'Water', 'Wave', 'Whisper', 'Widget', 'Willow', 'Wind', 'Winner', 'Winter', 'Wisdom', 'Wizard', 'Wonder', 'World', 'Yacht', 'Yankee', 'Yoga', 'Yogurt', 'Zebra', 'Zenith', 'Zephyr', 'Zero', 'Zigzag', 'Zinc', 'Zodiac', 'Zombie', 'Zone', 'Zoom'];

        // --- Core Functions ---
        const switchMode = (newMode) => {
            if (currentMode === newMode) return;
            currentMode = newMode;
            modeButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.mode === newMode));
            settingsPanels.forEach(panel => { panel.classList.toggle('hidden', panel.id !== `${newMode}-settings`); });
            generatePassword();
        };

        const generatePassword = () => {
            let password = '';
            switch (currentMode) {
                case 'random': password = generateRandomPassword(); break;
                case 'memorable': password = generateMemorablePassword(); break;
                case 'pin': password = generatePinPassword(); break;
            }
            passwordDisplay.textContent = password;
            passwordDisplay.classList.remove('pop-in'); void passwordDisplay.offsetWidth; passwordDisplay.classList.add('pop-in');
            updateStrengthIndicator();
        };

        const generateRandomPassword = () => { /* ... same as before ... */ let charPool = '', password = ''; const options = { uppercase: randomCheckboxes[0].checked, lowercase: randomCheckboxes[1].checked, numbers: randomCheckboxes[2].checked, symbols: randomCheckboxes[3].checked }; for (const [type, isSelected] of Object.entries(options)) { if (isSelected) { charPool += charSets[type]; password += charSets[type][Math.floor(Math.random() * charSets[type].length)]; } } if (!charPool) { charPool = charSets.lowercase; password += charSets.lowercase[Math.floor(Math.random() * charSets.lowercase.length)]; } for (let i = password.length; i < randomLengthSlider.value; i++) { password += charPool[Math.floor(Math.random() * charPool.length)]; } return password.split('').sort(() => 0.5 - Math.random()).join(''); };
        const generateMemorablePassword = () => { /* ... same as before ... */ let words = []; let shuffledWords = wordList.sort(() => 0.5 - Math.random()); for (let i = 0; i < wordCountSlider.value; i++) { words.push(shuffledWords[i]); } if (memorableCheckboxes[0].checked) { words = words.map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()); } else { words = words.map(word => word.toLowerCase()); } let password = words.join(separatorSelect.value); if (memorableCheckboxes[1].checked) { password += Math.floor(Math.random() * 10); } return password; };
        const generatePinPassword = () => { /* ... same as before ... */ let pin = ''; for (let i = 0; i < pinLengthSlider.value; i++) { pin += Math.floor(Math.random() * 10); } return pin; };
        
        const updateStrengthIndicator = () => { /* ... same as before ... */ let score = 0; if (currentMode === 'random') { if (randomLengthSlider.value >= 12) score++; if (randomLengthSlider.value >= 16) score++; if (randomCheckboxes[0].checked) score++; if (randomCheckboxes[1].checked) score++; if (randomCheckboxes[2].checked) score++; if (randomCheckboxes[3].checked) score++; } else if (currentMode === 'memorable') { score += (wordCountSlider.value - 2) * 2; if (memorableCheckboxes[0].checked) score++; if (memorableCheckboxes[1].checked) score++; if (separatorSelect.value !== '') score++; } else { if (pinLengthSlider.value >= 6) score++; if (pinLengthSlider.value >= 8) score+=2; } strengthBar.classList.remove('bg-red-500', 'bg-yellow-500', 'bg-emerald-500'); if (score < 4) { strengthBar.style.width = '33%'; strengthBar.classList.add('bg-red-500'); } else if (score < 6) { strengthBar.style.width = '66%'; strengthBar.classList.add('bg-yellow-500'); } else { strengthBar.style.width = '100%'; strengthBar.classList.add('bg-emerald-500'); } };
        const copyToClipboard = () => { /* ... same as before ... */ const password = passwordDisplay.textContent; const textArea = document.createElement('textarea'); textArea.value = password; document.body.appendChild(textArea); textArea.select(); try { document.execCommand('copy'); const originalContent = copyBtn.innerHTML; copyBtn.innerHTML = `<span class="text-sm">已复制!</span>`; setTimeout(() => { copyBtn.innerHTML = originalContent; }, 1500); } catch (err) { console.error('无法复制', err); } document.body.removeChild(textArea); };
        
        // --- Event Listeners ---
        modeButtons.forEach(btn => btn.addEventListener('click', () => switchMode(btn.dataset.mode)));
        copyBtn.addEventListener('click', copyToClipboard);
        refreshBtn.addEventListener('click', () => {
            generatePassword();
            refreshIcon.classList.add('spinning');
            setTimeout(() => refreshIcon.classList.remove('spinning'), 500);
        });
        // Sliders
        randomLengthSlider.addEventListener('input', e => { randomLengthValue.textContent = e.target.value; generatePassword(); });
        wordCountSlider.addEventListener('input', e => { wordCountValue.textContent = e.target.value; generatePassword(); });
        pinLengthSlider.addEventListener('input', e => { pinLengthValue.textContent = e.target.value; generatePassword(); });
        // Checkboxes and Selects
        document.querySelectorAll('#random-settings input, #memorable-settings input[type="checkbox"]').forEach(el => el.addEventListener('change', generatePassword));
        
        // Custom dropdown logic
        const setupCustomDropdown = () => {
            Array.from(separatorSelect.options).forEach(option => {
                const div = document.createElement('div');
                div.textContent = option.textContent;
                div.dataset.value = option.value;
                div.className = 'p-2 hover:bg-slate-200 dark:hover:bg-white/10 cursor-pointer text-slate-700 dark:text-white';
                div.addEventListener('click', () => {
                    separatorSelect.value = option.value;
                    customSeparatorLabel.textContent = option.textContent;
                    customSeparatorOptions.classList.add('hidden');
                    generatePassword();
                });
                customSeparatorOptions.appendChild(div);
            });
            customSeparatorLabel.textContent = separatorSelect.options[separatorSelect.selectedIndex].textContent;
        };
        customSeparatorButton.addEventListener('click', () => customSeparatorOptions.classList.toggle('hidden'));
        document.addEventListener('click', (e) => {
            if (!customSeparatorButton.parentElement.contains(e.target)) {
                customSeparatorOptions.classList.add('hidden');
            }
        });

        // --- Initial Load ---
        setupCustomDropdown();
        switchMode('random');
    </script>
</body>
</html>